<!doctype html><html lang=en><meta charset=utf-8><title>ror2-eh-calc</title><link href=data:image/gif;base64,R0lGODlhEAAQAPECACgoKEWFiAAAAAAAACH5BAUKAAIALAAAAAAQABAAAAIxFI6ZYhqhAIsvzvTqaijDjXnfcR3iKHGnlnYrwjTrF8tvWp5w7bJ1HCH9gIrhUPgrAAA7 rel=icon><style>body{background-color:#282828;color:#dbdbb2;font-family:sans-serif}.grid{display:grid;grid-template-columns:auto auto}.column{display:grid;grid-template-columns:auto}.grid>label{text-align:right}select{width:146px}input{width:142px}#button-container{display:flex;justify-content:center}#outputs{display:grid;grid-template-columns:auto auto auto}.common{color:#fbf1c7}.uncommon{color:#98971a}footer{position:fixed;bottom:0;width:100%;text-align:center}</style><div class=grid id=inputs><label>Character:</label><select id=char-select><option value=commando>Commando<option value=huntress>Huntress<option value=mul-t>MUL-T<option value=engineer>Engineer<option value=artificer>Artificer<option value=mercenary>Mercenary<option value=rex>Rex<option value=loader>Loader<option value=acrid>Acrid</select><label for=level>Level:</label><input id=level type=number max=999 min=1 value=20><label for=commons>#<span>Commons</span>:</label><input id=commons type=number max=999 min=1 value=30><label for=uncommons>#<span>Uncommons</span>:</label><input id=uncommons type=number max=999 min=1 value=10><label for=damage>Average Incoming Pre-Mitigation Hit:</label><input id=damage type=number max=999999999 min=1 value=1000><label for=spinel>Spinel Tonic?</label><input id=spinel type=checkbox><label for=jade>Jade Elephant?</label><input id=jade type=checkbox><label for=drizzle>Drizzle Mode?</label><input id=drizzle type=checkbox></div><div id=button-container><button id=calc onclick=calculate()>Calculate</button></div><hr><div id=outputs><div class=grid><label>Armor:</label><output id=out-armor></output><label>Health:</label><output id=out-health></output><label>Effective Health Multiplier:</label><output id=out-ehm></output><label>Effective Health:</label><output id=out-eh></output><label>Block Chance %:</label><output id=out-block></output><label>Effective Block Health Multiplier:</label><output id=out-ebhm></output><label>Effective Block Health:</label><u><b><output id=out-ebh></output></b></u></div><div class=grid><label class=common># Repulsion Armor Plate:</label><output id=repul class=common></output><label class=common># Tougher Times:</label><output id=tough class=common></output><label class=uncommon># Infusion:</label><output id=infus class=uncommon></output><label class=uncommon># Rose Buckler:</label><output id=rose class=uncommon></output></div><div class=column><label>Next best<span class=common> common:<br>• <output id=best-common></output></span>(+<output id=best-common-ebh></output>ebh)</label><label>Next best<span class=uncommon> uncommon:<br>• <output id=best-uncommon></output></span>(+<output id=best-uncommon-ebh></output>ebh)</label></div></div><footer>This page is 2KB</footer><script>var CHARS={commando:{armor:0,health:110,"health-lvl":33},huntress:{armor:0,health:90,"health-lvl":27},"mul-t":{armor:12,health:200,"health-lvl":60},engineer:{armor:0,health:130,"health-lvl":39},artificer:{armor:0,health:110,"health-lvl":33},mercenary:{armor:20,health:140,"health-lvl":42},rex:{armor:20,health:130,"health-lvl":39},loader:{armor:20,health:160,"health-lvl":48},acrid:{armor:20,health:160,"health-lvl":48}};function id_ele(e){return document.getElementById(e)}function get_block(e){return 1-1/(.15*e+1)}function get_ehm(e){return(100+e)/100}function get_ebh(e,l,t,h,a,o,r){return l+=100*o,l*=e=get_ehm(e+30*r),h=5*h*e,Math.round((l+h*l/Math.max(e,t-h))/(1-get_block(a)))}function calculate(){var e=CHARS[id_ele("char-select").value],l=id_ele("level").value,t=id_ele("commons").value,h=id_ele("uncommons").value,a=id_ele("damage").value,o=id_ele("spinel").checked,r=id_ele("jade").checked,u=id_ele("drizzle").checked,i=e.armor,_=e.health+e["health-lvl"]*l,d=l=e=0,m=0;for(i+=20*o+500*r+70*u;t+h;)r=o=-1,t&&(r=0,(o=get_ebh(i,_,a,e+1,l,d,m))<(u=get_ebh(i,_,a,e,l+1,d,m))&&(o=u,r=1)),h&&(o<(u=get_ebh(i,_,a,e,l,d+1,m))&&(o=u,r=2),o<(u=get_ebh(i,_,a,e,l,d,m+1))&&(r=3)),0===r?(++e,--t):1===r?(++l,--t):2===r?(++d,--h):3===r&&(++m,--h);h="Repulsion Armor Plate",(t=get_ebh(i,_,a,e+1,l,d,m))<(o=get_ebh(i,_,a,e,l+1,d,m))&&(t=o,h="Tougher Times"),r="Infusion",(o=get_ebh(i,_,a,e,l,d+1,m))<(u=get_ebh(i,_,a,e,l,d,m+1))&&(o=u,r="Rose Buckler");var n=_+100*d,v=get_ehm(u=i+30*m).toFixed(2),c=n*get_ehm(u),b=(100*get_block(l)).toFixed(2);i=((a=get_ebh(i,_,a,e,l,d,m))/n).toFixed(2),id_ele("out-armor").value=u,id_ele("out-health").value=n,id_ele("out-ehm").value=v,id_ele("out-eh").value=c,id_ele("out-block").value=b,id_ele("out-ebhm").value=i,id_ele("out-ebh").value=a,id_ele("repul").value=e,id_ele("tough").value=l,id_ele("infus").value=d,id_ele("rose").value=m,id_ele("best-common").value=h,id_ele("best-common-ebh").value=t-a,id_ele("best-uncommon").value=r,id_ele("best-uncommon-ebh").value=o-a}</script>